const { AppServer } = require('nodecaf');
const api = require('./api');

module.exports = function init(){
    let app = new AppServer(<%_ if(locals.conf){ _%>__dirname + '/<%= locals.conf %>'<% } %>);

    let shared = {};

    app.onRouteError = function(input, err, send){

    };

    app.beforeStart = async function(<%_ if(locals.conf){ _%>{ conf }<% } %>){

    };

    app.afterStop = async function(<%_ if(locals.conf){ _%>{ conf }<% } %>){

    };

    app.expose(shared);
    app.api(api);

    return app;
}
